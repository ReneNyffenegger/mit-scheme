IMAIL To-Do List
$Id: todo.txt,v 1.10 2000/05/15 19:11:52 cph Exp $

Bug fixes
---------

* Use UID FETCH instead of FETCH for IMAP?  In the case of Cyrus, it
  looks like UID FETCH does new-mail checks, while FETCH doesn't.

* Implement operations for IMAP: FOLDER-VALID?, SEARCH-FOLDER, and
  APPEND-MESSAGE.

* APPEND-MESSAGE should use the IMAP COPY command if the source and
  target folder are both on the same server and belong to the same
  user (i.e. if the URLs are equal except for the mailbox).  If the
  IMAP APPEND command is used, the internal date should be set from
  the unix from line, if available, or else computed from the
  "received:" headers, or the "date:" header as a last resort.

* Implement background thread to periodically send NOOP to IMAP server
  both to check for new mail and to keep the connection alive.

* Recovery from server disconnection should be more transparent.
  Should attempt to reconnect and signal error only if that fails.

* Must be able to handle malformed headers in incoming mail.
  Generating a low-level error in this situation is unacceptable.

* RENAME-FOLDER incorrectly uses RENAME-FILE when moving a file
  folder, which will fail on cross-device renames.

* RMAIL file reader must recognize when the tail of the file contains
  umail messages.

* IMAIL must support I/O to compressed files (for my sake if no one
  else).  A clean solution to this requires moving compressed-file
  support to the runtime system.

Design changes
--------------

* Implement something closer to the IMAP COPY operation, e.g.
  APPEND-MESSAGES.

* Reimplement UID synchronization.  Take advantage of monotonic UID
  numbers to discover largest prefix range that hasn't changed.
  Binary search can be used which should produce excellent results on
  large folders.  UID FETCH command should be useful for this.

* Try to leverage IMAP MIME parser by building compatible
  interface for file-based folders.

* Change file URLs to follow specification in RFC1738, which requires
  the use of forward slashes and encoding.  Take advantage of relative
  URLs as specified in RFC1808.  Maybe change URL representation to
  have a heirarchical path structure so that we can write MERGE-URLS.

New features
------------

* Write summary browser for folders.

* Implement URL completion.

* Write M-x imail-resend.

* Add an indication showing the connection status in the mode line.

* Add mail notification in mode line, active across the editor as long
  as there is an IMAP connection open in some buffer.

* Implement cache that saves information about messages on disk.  This
  should use UIDs for IMAP folders; for other folders perhaps the
  message ID can be used.  (Or perhaps no cache is required for
  non-IMAP folders.)

* Password memoization should be controllable from the editor.  Should
  this be moved into "imail-top"?  Then instead of storing the
  password in the connection object, we could store it in a hash
  table, or in a buffer property.

* Implement file backup when writing file folders.

* Write folder browser for IMAP servers.  Implement operations for
  IMAP: %NEW-FOLDER, %DELETE-FOLDER, %MOVE-FOLDER, %COPY-FOLDER,
  AVAILABLE-FOLDER-NAMES.
